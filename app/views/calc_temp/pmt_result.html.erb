
<dl>
  <dt>APR</dt>
  <dd> <%= number_to_percentage(@apr, precision: 4) %> </dd>

  <dt>Number of years</dt>
  <dd> <%= @num_years %> </dd>

  <dt>Principal</dt>
  <dd> <%= number_to_currency(@principal, precision: 2) %> </dd>

  <dt>Payment</dt>
  <dd> <%= number_to_currency(@monthly_payment, precision: 2) %> </dd>
</dl>

<a href="/payment/new">Calculate another payment</a>
<%# 
    @apr = params.fetch("apr").to_f
    @num_years = params.fetch("num_years").to_i
    @principal = params.fetch("principal").to_f
    @interest_rate = @apr / 1200
    @num_payments = @num_years * 12
    @numerator = @principal * @interest_rate
    @denominator = 1 - (1 + @interest_rate) ** -@num_payments
    @monthly_payment = @numerator / @denominator %>